

<!DOCTYPE html>
<html lang="en">
    <head th:insert="~{head :: headContent}" th:with="pageTitle='Edit Account'"></head>

<body>
    
    <nav th:insert="~{header :: navbar}"></nav>

    <section class="w-100 px-4 py-5 gestioneAccSection">
        <div class="row d-flex justify-content-center">
          <div class="col col-md-9 col-lg-7 col-xl-6">
            <div class="card" style="border-radius: 15px;">
              <div class="card-body p-4">
                <div class="d-flex">
                    <div class="accountPhotoCont">
                        <div class="accountImgCont">

                            <p th:if="${errorMessage}" th:text="${errorMessage}"></p>

                            <a th:if="${utente.img != null and utente.img.matches('^(http|https)://.*')}" th:href="${utente.img}">

                                <img class="img-fluid rounded-3 accountPhoto" th:src="${utente.img}" alt="User Image">
                            </a>
                            <!-- unless verifica se non Ã¨ verificato quello scritto tra parentesi -->
                            <a th:unless="${utente.img != null and utente.img.matches('^(http|https)://.*')}" 
                                th:href="@{'/images/' + ${utente.img}}">
                                <img class="img-fluid rounded-3 accountPhoto" th:src="@{'/images/' + ${utente.img}}" alt="Local Image">
                            </a>

                        </div>
                    </div>
                    <div class="flex-grow-1 ms-3">
                        <h5 class="mb-1" th:text="${utente.nome}"></h5>


                        <form enctype="multipart/form-data" th:object="${userDto}" method="post">

    
                            <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-body-secondary">
                                <div class="mx-3">
                                    <p class="small text-muted mb-1">Id</p>
                                    <input readonly class="form-control-plaintext" th:value="${utente.id}">
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-body-secondary">
                                <div class="mx-3">
                                    <p class="small text-muted mb-1">Nome</p>
                                    <input type="text" class="form-control-plaintext bg-white p-2 rounded" th:field="${userDto.nome}" placeholder="Inserisci il tuo nome">
                                </div>
                            </div>


                            <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-body-secondary">
                                <div class="mx-3">
                                    <p class="small text-muted mb-1">Username</p>
                                    <input type="text" class="form-control-plaintext bg-white p-2 rounded" th:field="${userDto.username}" placeholder="Inserisci il tuo Username">
                                    <p th:if="${#fields.hasErrors('username')}" th:errorclass="text-danger" th:errors="${userDto.username}"></p>
                                </div>
                            </div>

                            <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-body-secondary">
                                <div class="mx-3">
                                    <p class="small text-muted mb-1">Conferma Password</p>
                                        <input type="password" th:field="*{confermaPass}" class="form-control"/>
                                        <p th:if="${#fields.hasErrors('confermaPass')}" th:errorclass="text-danger" th:errors="*{confermaPass}"></p>
                                </div>
                            </div>

                            <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-body-secondary">
                                <div>
                                    <p class="small text-muted mb-1">Image</p>
                                    <input class="form-control" type="file" th:field="${userDto.img}" >
                                </div>
                            </div>
                            <div class="d-flex pt-1">
                                <button  type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-outline-primary me-1 flex-grow-1">Submit</button>
                                <button onclick="location.href='/account'"  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary flex-grow-1">Go Back</button>
                            </div>

                        </form>

                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>